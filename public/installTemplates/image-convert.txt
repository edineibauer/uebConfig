<?php

use Helpers\Check;
use Helpers\Helper;

require_once './_config/config.php';

$format = explode('/', $_GET['data'])[0];
$url = str_replace($format . '/', '', $_GET['data']);

if(($format === 'bmp' || $format === "bitmap") && Check::image($url)) {
    Helper::createFolderIfNoExist(PATH_HOME . "uploads/tmp");
    $name = pathinfo($_GET['url'], PATHINFO_FILENAME);
    $im = imagecreatefromwebp($url);
    imagebmp($im, PATH_HOME . "uploads/tmp/" . $name . '.bmp');
    imagedestroy($im);
}